/::
custom_css: assets/custom.css
::/

##Â .[cover]
# Vulkan pour le calcul scientifique 

!image(images/Onera-bloc-marque.png, ONERA, , 150)

## Historique .[vulkan]

<table style="margin-top: 40px">
<tr>
<td style="padding: 20px">
OpenGL en 1992 par Silicon Graphics
</td>
<td style="background: white; padding: 20px">
!image(images/OpenGL_logo.svg.png, opengl, , 150)
</td>
</tr>
<tr>
<td style="padding: 20px">
Concurrence avec DirectX
</td>
<td style="background: white; padding: 20px">
!image(images/DirectX_logo.png, directx, , 150)
</td>
</tr>
<tr>
<td style="padding: 20px">
Vulkan en 2016
</td>
<td style="background: white; padding: 20px">
!image(images/Vulkan_logo.svg.png, vulkan, , 150)
</td>
</tr>
</table>

## Vulkan : Qu'est-ce donc ? .[vulkan]

- Une API couche mince pour manipuler les GPGPUs (C ou C++)
- PremiÃ¨re version apparue en 2016 (version 1.0)
- DerniÃ¨re version apparue le 30 AoÃ»t 2024 (version 1.3.295)
- DestinÃ© Ã  remplacer OpenGL et Open GL/Es
- Permet de mieux prendre en compte les architectures modernes des GPGPUs 
- CrÃ©ation des images multithreadables (intÃ©ressant sur les smartphones et les tablettes)
- Fonctionne sur un grand nombre d'OS et de GPGPUS

## .[cover]
# Vue globale de Vulkan

## Buts de Vulkan .[vulkan]

#### ğŸ¤”  Objectifs  ğŸ¤”

- Se dÃ©barrasser de l'hÃ©ritage d'OpenGL
- Permettre l'utilisation de la puissance totale de la machine

####Â ğŸ’» RÃ©alisation ğŸ’»

- Pas de state machine globale : permet le multithreading
- Synchronisations CPU-GPU gÃ©rÃ©es par le dÃ©veloppeur **â‡’** pilote ignore concurrences mÃ©moires
- MÃ©moire entiÃ¨rement gÃ©rÃ©e par le dÃ©veloppeur **â‡’** pas d'hypothÃ¨se du pilote sur les ressources 
- VÃ©rifications erreurs minimales **â‡’** pas de vÃ©rifications faites par le pilote pour optimisation.

## 
##Â API proposÃ©es .[vulkan]

- Par dÃ©faut : **C** ou **C++**
- **C++** permet code plus concis et plus sÃ»r
- Mais plupart des tutoriaux uniquement pour le **C** !
- Plusieurs *wrappers* existent pour Python
- *vulkano-rs* pour rust
- etc.

## Architecture globale  .[vulkan]

<table style="margin-top: 40px">
<td style="padding: 20px">
!image(images/Vulkan-Diagram.avif,, ,780)
</td>
<td style="padding: 20px">
<a href="https://gpuopen.com/learn/understanding-vulkan-objects/">
<span style="color: #ffff00; font-style:italic">Â©AMD GPUOPen</span>
</a><br><br>
ğŸ‘‰ Lignes <span style="color: #ff0000">â¤â–º</span> reprÃ©sentent ordre de crÃ©ation<br><br>
ğŸ‘‰ Lignes <span style="color: #ff0000">â—†â¤</span> reprÃ©sentent composition (objets existent dÃ©jÃ )<br><br>
ğŸ‘‰ Lignes <span style="color: #ff0000">â”„â”„</span> reprÃ©sentent d'autres relations<br><br>
ğŸ‘‰ <span style="color: #000000; background-color:lightgreen; border: 2px solid black; padding: 2px">objet</span> n'a pas son propre type (rÃ©fÃ©rencÃ© que par un entier)<br><br>
ğŸ‘‰ <span style="color: #000000; background-color:red; border: 2px solid black; padding: 2px">objet</span> principal permettant crÃ©ation autres objets de la section.
</td>
</table>

## 
##Â Objets Vulkan .[vulkan]

- <span class="ccode">Instance</span> : Premier objet Ã  crÃ©er connectant votre application et le runtime Vulkan;
    - DÃ©finir toutes les couches logicielles utilisÃ©es (comme celle de validation);
    - DÃ©finir les extensions utilisÃ©es
- <span class="ccode">PhysicalDevice</span>: ReprÃ©sente un pÃ©riphÃ©rique physique compatible avec Vulkan;
    - EnumÃ©ration des <span class="ccode">FamilyQueue</span>s (graphisme, calcul, raytracing, ...)
    - EnumÃ©ration des <span class="ccode">MemoryHeap</span>s : reprÃ©sente un rÃ©servoir pour une mÃ©moire spÃ©cifique. 
    - EnumÃ©ration des <span class="ccode">MemoryType</span>s : propriÃ©tÃ©s mÃ©moire (visible, cohÃ©rent, en cache).
- <span class="ccode">Device</span>: PÃ©riphÃ©rique logique. Permet de crÃ©er tous les autres objets. 
    - A la crÃ©ation, spÃ©cifier certaines fonctionnalitÃ©s utilisÃ©es (ex. filtres des textures anisotropiques).
    - SpÃ©cifier toutes les queues utilisÃ©es, leur nombre et leurs familles de queue.

## Initialisation du contexte .[vulkan]

####Â Remplissage information sur l'application

<pre><code class="language-*">vk::ApplicationInfo application_info;
application_info.setApiVersion(vk::ApiVersion13)
                .setPApplicationName("Computing shader")
                .setApplicationVersion(0)
                .setPEngineName("Computing engine")
                .setEngineVersion(0);
</code></pre> 

####Â Remplissage information crÃ©ation contexte

<pre><code class="language-cpp">vk::InstanceCreateInfo create_info;
create_info.setPApplicationInfo(&application_info)
           .setEnabledLayerCount(uint32_t(this->enabled_layers.size()))
           .setPpEnabledLayerNames(enabled_layers.data())
           .setEnabledExtensionCount(uint32_t(this->enabled_extensions.size()))
           .setPpEnabledExtensionNames(this->enabled_extensions.data());
</code></pre>

<pre><code>instance = vk::createInstance(create_info);
</code></pre>


## Â Pipeline Vulkan complet .[vulkan]

!image(images/vulkan_pipeline_block_diagram.png, vulkan diagram, , )


